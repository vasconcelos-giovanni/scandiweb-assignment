<?php
/* -------------------------------------------------------------------------- */
/*                                 Autoloading                                */
/* -------------------------------------------------------------------------- */
require_once __DIR__ . '/../vendor/autoload.php';

/* -------------------------------------------------------------------------- */
/*                                 DotEnv file                                */
/* -------------------------------------------------------------------------- */
$dotenv = Dotenv\Dotenv::createImmutable(dirname(__DIR__));
$dotenv->load();

/* -------------------------------------------------------------------------- */
/*                                  Constants                                 */
/* -------------------------------------------------------------------------- */
define('ROUTES_PATH', __DIR__ . '/../routes');
define('VIEW_PATH', __DIR__ . '/../views');

/* -------------------------------------------------------------------------- */
/*                                   Imports                                  */
/* -------------------------------------------------------------------------- */
use App\Router;
use App\Config;
use App\Helpers\Debug;

/* -------------------------------------------------------------------------- */
/*                                   Routing                                  */
/* -------------------------------------------------------------------------- */
$router = new Router();
require_once ROUTES_PATH . '/web.php';

// Debug::pd($router->listRoutes());

/* -------------------------------------------------------------------------- */
/*                             App initialization                             */
/* -------------------------------------------------------------------------- */
(new App\App(
    $router,
    [
        'method' => $_SERVER['REQUEST_METHOD'],
        'uri' => $_SERVER['REQUEST_URI']
    ],
    new Config($_ENV)
))->up();
